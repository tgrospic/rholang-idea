LINE_COMMENT ('// A token contract that implements the ERC20 standard.')
WHITE_SPACE ('\n')
LINE_COMMENT ('// This contract demonstrates the creation of a token,')
WHITE_SPACE ('\n')
LINE_COMMENT ('// the transferring of tokens, the querying of a balance,')
WHITE_SPACE ('\n')
LINE_COMMENT ('// and the printing of the balance query result.')
WHITE_SPACE ('\n\n')
new ('new')
WHITE_SPACE (' ')
VAR ('token')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n    ')
contract ('contract')
WHITE_SPACE (' ')
VAR ('token')
WHITE_SPACE (' ')
( ('(')
VAR ('message_sender')
, (',')
WHITE_SPACE (' ')
VAR ('total_supply')
, (',')
WHITE_SPACE (' ')
VAR ('return_channel')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
new ('new')
WHITE_SPACE (' ')
VAR ('allowed_channel')
, (',')
WHITE_SPACE (' ')
VAR ('balances_channel')
, (',')
WHITE_SPACE (' ')
VAR ('owner_channel')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n            ')
VAR ('allowed_channel')
! ('!')
( ('(')
VAR ('Map')
( ('(')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n            ')
VAR ('owner_channel')
! ('!')
( ('(')
VAR ('message_sender')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n            ')
VAR ('balances_channel')
! ('!')
( ('(')
VAR ('Map')
( ('(')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n            ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('balances')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('balances_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                ')
VAR ('balances_channel')
! ('!')
( ('(')
WHITE_SPACE (' ')
VAR ('balances')
. ('.')
VAR ('insert')
( ('(')
VAR ('message_sender')
, (',')
WHITE_SPACE (' ')
VAR ('total_supply')
) (')')
WHITE_SPACE (' ')
) (')')
WHITE_SPACE ('\n            ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n            ')
new ('new')
WHITE_SPACE (' ')
VAR ('transfer')
, (',')
WHITE_SPACE (' ')
VAR ('transfer_from')
, (',')
WHITE_SPACE (' ')
VAR ('approve')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of')
, (',')
WHITE_SPACE (' ')
VAR ('allowance')
, (',')
WHITE_SPACE (' ')
VAR ('contract_owner')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
VAR ('transfer')
( ('(')
VAR ('message_sender')
, (',')
WHITE_SPACE (' ')
VAR ('to')
, (',')
WHITE_SPACE (' ')
VAR ('amount')
, (',')
WHITE_SPACE (' ')
VAR ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('balances')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('balances_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
new ('new')
WHITE_SPACE (' ')
VAR ('x')
, (',')
WHITE_SPACE (' ')
VAR ('y')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                            ')
VAR ('x')
! ('!')
( ('(')
VAR ('balances')
. ('.')
VAR ('getOrElse')
( ('(')
VAR ('message_sender')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
VAR ('y')
! ('!')
( ('(')
VAR ('balances')
. ('.')
VAR ('getOrElse')
( ('(')
VAR ('to')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('balance_of_sender')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('x')
WHITE_SPACE ('\n                              ')
; (';')
WHITE_SPACE (' ')
VAR ('balance_of_receiver')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('y')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                ')
LINE_COMMENT ('// Preconditions to check before the transfer goes through')
WHITE_SPACE ('\n                                ')
match ('match')
WHITE_SPACE (' ')
[ ('[')
WHITE_SPACE ('\n                                  ')
VAR ('balance_of_sender')
WHITE_SPACE (' ')
>= ('>=')
WHITE_SPACE (' ')
VAR ('amount')
, (',')
WHITE_SPACE ('\n                                  ')
VAR ('amount')
WHITE_SPACE (' ')
> ('>')
WHITE_SPACE (' ')
DEC_LIT ('0')
, (',')
WHITE_SPACE ('\n                                  ')
VAR ('balance_of_receiver')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE (' ')
VAR ('amount')
WHITE_SPACE (' ')
> ('>')
WHITE_SPACE (' ')
VAR ('balance_of_receiver')
WHITE_SPACE ('\n                                ')
] (']')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                    ')
[ ('[')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
] (']')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                        ')
VAR ('balances_channel')
! ('!')
( ('(')
WHITE_SPACE ('\n                                          ')
( ('(')
VAR ('balances')
WHITE_SPACE ('\n                                          ')
. ('.')
VAR ('insert')
( ('(')
VAR ('message_sender')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of_sender')
WHITE_SPACE (' ')
- ('-')
WHITE_SPACE (' ')
VAR ('amount')
) (')')
) (')')
WHITE_SPACE ('\n                                          ')
. ('.')
VAR ('insert')
( ('(')
VAR ('to')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of_receiver')
+ ('+')
VAR ('amount')
) (')')
WHITE_SPACE ('\n                                        ')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
VAR ('rtn')
! ('!')
( ('(')
true ('true')
) (')')
WHITE_SPACE ('\n                                    ')
} ('}')
WHITE_SPACE ('\n                                    ')
VAR ('_')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                        ')
VAR ('balances_channel')
! ('!')
( ('(')
VAR ('balances')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
VAR ('rtn')
! ('!')
( ('(')
false ('false')
) (')')
WHITE_SPACE ('\n                                    ')
} ('}')
WHITE_SPACE ('\n                                ')
} ('}')
WHITE_SPACE ('\n                            ')
} ('}')
WHITE_SPACE ('\n                        ')
} ('}')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
LINE_COMMENT ('// Same as the transfer contract but allows for the sender to be different from')
WHITE_SPACE ('\n                ')
LINE_COMMENT ('// the person calling the transfer_from contract')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
VAR ('transfer_from')
( ('(')
VAR ('message_sender')
, (',')
WHITE_SPACE (' ')
VAR ('from')
, (',')
WHITE_SPACE (' ')
VAR ('to')
, (',')
WHITE_SPACE (' ')
VAR ('amount')
, (',')
WHITE_SPACE (' ')
VAR ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('balances')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('balances_channel')
WHITE_SPACE ('\n                      ')
; (';')
WHITE_SPACE (' ')
VAR ('allowed')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('allowed_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
new ('new')
WHITE_SPACE (' ')
VAR ('x')
, (',')
WHITE_SPACE (' ')
VAR ('y')
, (',')
WHITE_SPACE (' ')
VAR ('z')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                            ')
VAR ('x')
! ('!')
( ('(')
VAR ('balances')
. ('.')
VAR ('getOrElse')
( ('(')
VAR ('from')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
VAR ('y')
! ('!')
( ('(')
VAR ('allowed')
. ('.')
VAR ('getOrElse')
( ('(')
VAR ('from')
, (',')
WHITE_SPACE (' ')
VAR ('message_sender')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
VAR ('z')
! ('!')
( ('(')
VAR ('balances')
. ('.')
VAR ('getOrElse')
( ('(')
VAR ('to')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                            ')
for ('for')
WHITE_SPACE (' ')
( ('(')
WHITE_SPACE (' ')
VAR ('balance_of_sender')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('x')
WHITE_SPACE ('\n                              ')
; (';')
WHITE_SPACE (' ')
VAR ('sender_allowed')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('y')
WHITE_SPACE ('\n                              ')
; (';')
WHITE_SPACE (' ')
VAR ('balance_of_receiver')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('z')
WHITE_SPACE (' ')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                ')
match ('match')
WHITE_SPACE (' ')
[ ('[')
WHITE_SPACE ('\n                                  ')
VAR ('balance_of_sender')
WHITE_SPACE (' ')
>= ('>=')
WHITE_SPACE (' ')
VAR ('amount')
, (',')
WHITE_SPACE ('\n                                  ')
VAR ('sender_allowed')
WHITE_SPACE (' ')
>= ('>=')
WHITE_SPACE (' ')
VAR ('amount')
, (',')
WHITE_SPACE ('\n                                  ')
VAR ('amount')
WHITE_SPACE (' ')
> ('>')
WHITE_SPACE (' ')
DEC_LIT ('0')
, (',')
WHITE_SPACE ('\n                                  ')
VAR ('balance_of_receiver')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE (' ')
VAR ('amount')
WHITE_SPACE (' ')
> ('>')
WHITE_SPACE (' ')
VAR ('balance_of_receiver')
WHITE_SPACE ('\n                                ')
] (']')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                    ')
[ ('[')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
, (',')
WHITE_SPACE (' ')
true ('true')
] (']')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                        ')
VAR ('balances_channel')
! ('!')
( ('(')
WHITE_SPACE ('\n                                          ')
( ('(')
VAR ('balances')
WHITE_SPACE ('\n                                          ')
. ('.')
VAR ('insert')
( ('(')
VAR ('from')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of_sender')
WHITE_SPACE (' ')
- ('-')
WHITE_SPACE (' ')
VAR ('amount')
) (')')
) (')')
WHITE_SPACE ('\n                                          ')
. ('.')
VAR ('insert')
( ('(')
VAR ('to')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of_receiver')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE (' ')
VAR ('amount')
) (')')
WHITE_SPACE ('\n                                        ')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
VAR ('allowed_channel')
! ('!')
( ('(')
WHITE_SPACE ('\n                                          ')
VAR ('allowed')
. ('.')
VAR ('insert')
( ('(')
VAR ('from')
, (',')
WHITE_SPACE (' ')
VAR ('message_sender')
, (',')
WHITE_SPACE (' ')
VAR ('sender_allowed')
WHITE_SPACE (' ')
- ('-')
WHITE_SPACE (' ')
VAR ('amount')
) (')')
WHITE_SPACE ('\n                                        ')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
VAR ('rtn')
! ('!')
( ('(')
true ('true')
) (')')
WHITE_SPACE ('\n                                    ')
} ('}')
WHITE_SPACE ('\n                                    ')
VAR ('_')
WHITE_SPACE (' ')
=> ('=>')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                                        ')
VAR ('balances_channel')
! ('!')
( ('(')
VAR ('balances')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
VAR ('allowed_channel')
! ('!')
( ('(')
VAR ('allowed')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                                        ')
VAR ('rtn')
! ('!')
( ('(')
false ('false')
) (')')
WHITE_SPACE ('\n                                    ')
} ('}')
WHITE_SPACE ('\n                                ')
} ('}')
WHITE_SPACE ('\n                            ')
} ('}')
WHITE_SPACE ('\n                        ')
} ('}')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
LINE_COMMENT ('// This is the way an address can pre-approve (delegate) the transfer of')
WHITE_SPACE ('\n                ')
LINE_COMMENT ('// a certain amount of tokens to some other address. This allows for')
WHITE_SPACE ('\n                ')
LINE_COMMENT ('// that other address, through the use of the transfer_from function,')
WHITE_SPACE ('\n                ')
LINE_COMMENT ('// to send up to that amount of tokens.')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
VAR ('approve')
( ('(')
VAR ('message_sender')
, (',')
WHITE_SPACE (' ')
VAR ('spender')
, (',')
WHITE_SPACE (' ')
VAR ('amount')
, (',')
WHITE_SPACE (' ')
VAR ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('allowed')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('allowed_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
VAR ('allowed_channel')
! ('!')
( ('(')
VAR ('allowed')
. ('.')
VAR ('insert')
( ('(')
VAR ('message_sender')
, (',')
VAR ('spender')
, (',')
VAR ('amount')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                        ')
VAR ('rtn')
! ('!')
( ('(')
true ('true')
) (')')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
VAR ('balance_of')
( ('(')
VAR ('owner')
, (',')
WHITE_SPACE (' ')
VAR ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('balances')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('balances_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
VAR ('rtn')
! ('!')
( ('(')
VAR ('balances')
. ('.')
VAR ('getOrElse')
( ('(')
VAR ('owner')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('0')
) (')')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                        ')
VAR ('balances_channel')
! ('!')
( ('(')
VAR ('balances')
) (')')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
VAR ('allowance')
( ('(')
VAR ('owner')
, (',')
WHITE_SPACE (' ')
VAR ('spender')
, (',')
WHITE_SPACE (' ')
VAR ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('allowed')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('allowed_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
VAR ('allowed_channel')
! ('!')
( ('(')
VAR ('allowed')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                        ')
VAR ('rtn')
! ('!')
( ('(')
VAR ('allowed')
. ('.')
VAR ('getOrElse')
( ('(')
VAR ('owner')
, (',')
VAR ('spender')
, (',')
DEC_LIT ('0')
) (')')
) (')')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
contract ('contract')
WHITE_SPACE (' ')
VAR ('contract_owner')
( ('(')
VAR ('rtn')
) (')')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('owner')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('owner_channel')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                        ')
VAR ('owner_channel')
! ('!')
( ('(')
VAR ('owner')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                        ')
VAR ('rtn')
! ('!')
( ('(')
VAR ('owner')
) (')')
WHITE_SPACE ('\n                    ')
} ('}')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
VAR ('return_channel')
! ('!')
( ('(')
WHITE_SPACE ('\n                  ')
VAR ('Map')
( ('(')
) (')')
. ('.')
VAR ('insertMany')
( ('(')
STRING_LIT ('"transfer"')
, (',')
WHITE_SPACE (' ')
VAR ('transfer')
, (',')
WHITE_SPACE (' ')
STRING_LIT ('"transfer_from"')
, (',')
WHITE_SPACE (' ')
VAR ('transfer_from')
, (',')
WHITE_SPACE ('\n                  ')
STRING_LIT ('"approve"')
, (',')
WHITE_SPACE (' ')
VAR ('approve')
, (',')
WHITE_SPACE (' ')
STRING_LIT ('"balance_of"')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of')
, (',')
WHITE_SPACE (' ')
STRING_LIT ('"allowance"')
, (',')
WHITE_SPACE (' ')
VAR ('allowance')
, (',')
WHITE_SPACE ('\n                  ')
STRING_LIT ('"contract_owner"')
, (',')
WHITE_SPACE (' ')
VAR ('contract_owner')
) (')')
) (')')
WHITE_SPACE ('\n                ')
LINE_COMMENT ('// TODO: Eventually just insert with compiler')
WHITE_SPACE ('\n            ')
} ('}')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n    ')
new ('new')
WHITE_SPACE (' ')
VAR ('rtn')
, (',')
WHITE_SPACE (' ')
VAR ('me')
, (',')
WHITE_SPACE (' ')
VAR ('they')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
VAR ('token')
! ('!')
( ('(')
VAR ('me')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('100')
, (',')
WHITE_SPACE (' ')
VAR ('rtn')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n        ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('token_contract')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('rtn')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n            ')
new ('new')
WHITE_SPACE (' ')
VAR ('unused_rtn')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of_rtn')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                ')
@ ('@')
VAR ('token_contract')
. ('.')
VAR ('get')
( ('(')
STRING_LIT ('"transfer"')
) (')')
! ('!')
( ('(')
VAR ('me')
, (',')
WHITE_SPACE (' ')
VAR ('they')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('50')
, (',')
WHITE_SPACE (' ')
VAR ('unused_rtn')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
@ ('@')
VAR ('token_contract')
. ('.')
VAR ('get')
( ('(')
STRING_LIT ('"balance_of"')
) (')')
! ('!')
( ('(')
VAR ('they')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of_rtn')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('they_balance')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('balance_of_rtn')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
VAR ('they_balance')
. ('.')
VAR ('display')
( ('(')
STRING_LIT ('"\n"')
) (')')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE ('\n            ')
} ('}')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n    ')
new ('new')
WHITE_SPACE (' ')
VAR ('rtn2')
, (',')
WHITE_SPACE (' ')
VAR ('me2')
, (',')
WHITE_SPACE (' ')
VAR ('they2')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
VAR ('token')
! ('!')
( ('(')
VAR ('me2')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('1000')
, (',')
WHITE_SPACE (' ')
VAR ('rtn2')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n        ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('token_contract2')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('rtn2')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n            ')
new ('new')
WHITE_SPACE (' ')
VAR ('unused_rtn2')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of_rtn2')
WHITE_SPACE (' ')
in ('in')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                ')
@ ('@')
VAR ('token_contract2')
. ('.')
VAR ('get')
( ('(')
STRING_LIT ('"transfer"')
) (')')
! ('!')
( ('(')
VAR ('me2')
, (',')
WHITE_SPACE (' ')
VAR ('they2')
, (',')
WHITE_SPACE (' ')
DEC_LIT ('500')
, (',')
WHITE_SPACE (' ')
VAR ('unused_rtn2')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
@ ('@')
VAR ('token_contract2')
. ('.')
VAR ('get')
( ('(')
STRING_LIT ('"balance_of"')
) (')')
! ('!')
( ('(')
VAR ('they2')
, (',')
WHITE_SPACE (' ')
VAR ('balance_of_rtn2')
) (')')
WHITE_SPACE (' ')
| ('|')
WHITE_SPACE ('\n                ')
for ('for')
WHITE_SPACE (' ')
( ('(')
VAR ('they_balance2')
WHITE_SPACE (' ')
< ('<')
- ('-')
WHITE_SPACE (' ')
VAR ('balance_of_rtn2')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n                    ')
VAR ('they_balance2')
. ('.')
VAR ('display')
( ('(')
STRING_LIT ('"\n"')
) (')')
WHITE_SPACE ('\n                ')
} ('}')
WHITE_SPACE ('\n            ')
} ('}')
WHITE_SPACE ('\n        ')
} ('}')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE ('\n    ')
LINE_COMMENT ('// Once we have a registry, we can do registry_channel!(token) to save the contract there')
WHITE_SPACE ('\n')
} ('}')
